(()=>{var e={781:e=>{e.exports={initEditor:function(){return tinymce.init({selector:"#editor",content_css:"/TinyMCE/editorContent.css",plugins:"lists link",toolbar:!1,menubar:!1,statusbar:!1,setup:function(e){window.editor=e,e.originalDropdownValues={}}})}}},872:e=>{e.exports={createDropdownManager:function(e){function t(){const t=e.iframeElement;return t.contentDocument||t.contentWindow.document}return{updateValidDropdowns:function(n,o,a){const r=t().querySelectorAll("select.custom-dropdown:not(.error-dropdown)"),l=[];r.forEach((t=>{l.push({id:t.id,currentValue:t.value,originalValue:e.originalDropdownValues[t.id]||t.value})})),r.forEach((t=>{const r=l.find((e=>e.id===t.id));r.currentValue===o&&(r.currentValue=a,r.originalValue=a,e.originalDropdownValues[t.id]=a);let i="",d=r.currentValue;n.includes(d)||(n.includes(r.originalValue)?d=r.originalValue:(d=n[0],e.originalDropdownValues[t.id]=n[0])),n.forEach((e=>{i+=`<option value="${e}" ${e===d?"selected":""}>${e}</option>`})),t.innerHTML=i,t.value=d}))},markDeletedDropdowns:function(n,o){const a=t(),r=a.querySelectorAll("select.custom-dropdown");let l=!1;const i={};if(r.forEach((e=>{i[e.id]=e.value})),r.forEach((t=>{const a=t.id,r=i[a];t.classList.contains("error-dropdown")||(r===n?(t.className="custom-dropdown error-dropdown",t.style.cssText="\n                    display: inline-block;\n                    margin: 0 4px;\n                    min-width: 100px;\n                    border: 2px solid #ff0000 !important;\n                    background-color: #ffebee !important;\n                    color: #ff0000 !important;\n                ",t.innerHTML='<option value="ERROR" class="error-option" selected>ERROR: Template deleted</option>',l=!0,e.originalDropdownValues[a]="ERROR"):(t.innerHTML=o.map((e=>`<option value="${e}" ${e===r?"selected":""}>${e}</option>`)).join(""),t.value=o.includes(r)?r:e.originalDropdownValues[a]||o[0],l=!0))})),l){const t=a.body.innerHTML;e.setContent(t)}return l},createDropdownHtml:function(e,t,n){return`\n            <select id="${e}" \n                    class="custom-dropdown" \n                    style="display: inline-block; margin: 0 4px; min-width: 100px;">\n                ${t.map((e=>`<option value="${e}" ${e===n?"selected":""}>${e}</option>`)).join("")}\n            </select>\n        `}}}}},889:e=>{e.exports={createDOMManager:function(e){const t=document.getElementById("templates-list"),n=document.getElementById("add-template"),o=document.getElementById("remove-template"),a=document.getElementById("template-edit"),r=document.getElementById("insert-button");let l=null;return{updateTemplatesList:function(n){t.innerHTML="",e.templates.forEach(((e,o)=>{const a=document.createElement("div");a.className="template-item "+(o===n?"selected":""),a.textContent=e,a.addEventListener("click",(()=>{l&&l(o)})),t.appendChild(a)}));const o=document.getElementById("template-edit");n>=0&&n<e.templates.length?o.value=e.templates[n]:o.value=""},bindEvents:function(e){l=e.onTemplateSelected,n.addEventListener("click",e.onAddTemplate),o.addEventListener("click",e.onRemoveTemplate),r.addEventListener("click",e.onInsertDropdown),a.addEventListener("change",e.onUpdateTemplate),a.addEventListener("blur",e.onUpdateTemplate)},showError:function(e){alert(e)},confirmAction:function(e){return confirm(e)}}}}},901:e=>{e.exports={createState:function(){return{templates:["template 1","template 2","template 3"],selectedIndex:-1,addTemplate:function(){let e="template",t=1;for(;this.templates.includes(`${e} ${t}`);)t++;const n=`${e} ${t}`;return this.templates.push(n),!0},removeTemplate:function(e){return e>=0&&e<this.templates.length?this.templates.splice(e,1)[0]:null},updateTemplate:function(e,t){const n=t.trim();return e>=0&&e<this.templates.length&&!this.templates.some(((t,o)=>o!==e&&t===n))&&(this.templates[e]=n,!0)}}}}}},t={};function n(o){var a=t[o];if(void 0!==a)return a.exports;var r=t[o]={exports:{}};return e[o](r,r.exports,n),r.exports}(()=>{"use strict";const{initEditor:e}=n(781),{createState:t}=n(901),{createDOMManager:o}=n(889),{createDropdownManager:a}=n(872);document.addEventListener("DOMContentLoaded",(async function(){try{await e();const n=t(),r=o(n),l=a(window.editor);let i=-1;function d(e){i=e,r.updateTemplatesList(i),l.updateValidDropdowns(n.templates)}r.bindEvents({onAddTemplate:()=>{n.addTemplate()&&(d(n.templates.length-1),document.getElementById("template-edit").focus(),document.getElementById("template-edit").select())},onRemoveTemplate:()=>{if(i>=0){if(!r.confirmAction("Are you sure you want to delete this template?"))return;const e=n.removeTemplate(i);e&&(l.markDeletedDropdowns(e,n.templates),i=-1,r.updateTemplatesList(i))}},onUpdateTemplate:()=>{if(i>=0){const e=n.templates[i],t=document.getElementById("template-edit").value.trim();n.updateTemplate(i,t)?(l.updateValidDropdowns(n.templates,e,t),r.updateTemplatesList(i)):(r.showError("Template with this name already exists!"),document.getElementById("template-edit").value=e)}},onInsertDropdown:()=>{if(0===n.templates.length)return void r.showError("Add at least one template first!");const e="dropdown-"+Math.random().toString(36).substr(2,9),t=n.templates[0],o=l.createDropdownHtml(e,n.templates,t);window.editor.originalDropdownValues[e]=t,window.editor.insertContent(o)},onTemplateSelected:d}),r.updateTemplatesList(i)}catch(s){console.error("Application initialization failed:",s)}}))})()})();